<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ChatGPT-assisted PPSS Platform</title>
  <link rel="stylesheet" href="styles/main.css" />
</head>
<body>
  <nav class="sidebar">
    <div class="logo">PPSS</div>
    <ul>
      <li><a href="index.html" class="active"><span class="icon">ğŸ </span><span>Home</span></a></li>
      <li><a href="workspace.html"><span class="icon">ğŸ§ </span><span>Workspace</span></a></li>
      <li><a href="report.html"><span class="icon">ğŸ“Š</span><span>Report</span></a></li>
      <li><a href="settings.html"><span class="icon">âš™ï¸</span><span>Settings</span></a></li>
    </ul>
  </nav>
  <main class="content">
    <header>
      <h1>ChatGPT-assisted Product-Service System Platform</h1>
    </header>
    <section>
      <p>
        The home dashboard presents an overview of the proactive product-service system design workflow, summarizing the current project status and providing quick access to collaborative tasks described in the case study.
      </p>
      <p>
        Use the navigation on the left to explore the dedicated workspace, review generated reports, and configure platform preferences as outlined in the research article.
      </p>
    </section>

    <section class="workspace-login" aria-labelledby="workspace-login-heading">
      <h2 id="workspace-login-heading">Access Your Workspace</h2>
      <p>
        Enter the access code provided for your team to open a dedicated workspace. Each code stores its own dialogue, evidence, and summaries so that multiple teams can explore the platform independently.
      </p>
      <form id="workspace-access-form" class="login-form">
        <label for="workspace-code">Workspace Access Code</label>
        <div class="login-input-group">
          <input id="workspace-code" name="workspace-code" type="text" autocomplete="off" required placeholder="Enter code (e.g., TEAM-42)" />
          <button type="submit">Open Workspace</button>
        </div>
        <p id="login-feedback" class="login-feedback" role="alert" hidden></p>
      </form>
    </section>
  </main>
  <script>
    (function () {
      const STORAGE_PREFIX = 'ppss';
      const ACTIVE_WORKSPACE_KEY = `${STORAGE_PREFIX}-active-code`;
      const form = document.getElementById('workspace-access-form');
      const codeInput = document.getElementById('workspace-code');
      const feedback = document.getElementById('login-feedback');

      function showFeedback(message, tone = 'info') {
        if (!feedback) return;
        feedback.textContent = message;
        feedback.className = `login-feedback ${tone === 'error' ? 'error' : tone === 'success' ? 'success' : ''}`.trim();
        feedback.hidden = !message;
      }

      const params = new URLSearchParams(window.location.search);
      if (params.get('login') === 'required') {
        showFeedback('ì›Œí¬ìŠ¤í˜ì´ìŠ¤ì— ì ‘ê·¼í•˜ë ¤ë©´ ì½”ë“œë¥¼ ì…ë ¥í•˜ì„¸ìš”.', 'error');
        params.delete('login');
        const newUrl = `${window.location.pathname}${params.toString() ? `?${params}` : ''}${window.location.hash}`;
        window.history.replaceState({}, '', newUrl);
      } else {
        const stored = localStorage.getItem(ACTIVE_WORKSPACE_KEY);
        if (stored) {
          codeInput.value = stored;
          showFeedback(`ìµœê·¼ì— ì—´ë¦° ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ì½”ë“œ ${stored} ê°€ ì¤€ë¹„ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ìƒˆë¡œìš´ ì½”ë“œë¥¼ ì…ë ¥í•˜ë©´ ë³€ê²½ë©ë‹ˆë‹¤.`, 'info');
        }
      }

      form.addEventListener('submit', (event) => {
        event.preventDefault();
        const code = codeInput.value.trim();
        if (!code) {
          showFeedback('ìœ íš¨í•œ ì½”ë“œë¥¼ ì…ë ¥í•˜ì„¸ìš”.', 'error');
          return;
        }
        localStorage.setItem(ACTIVE_WORKSPACE_KEY, code);
        showFeedback('ì›Œí¬ìŠ¤í˜ì´ìŠ¤ë¥¼ ì—¬ëŠ” ì¤‘ì…ë‹ˆë‹¤...', 'success');
        window.location.href = `workspace.html?code=${encodeURIComponent(code)}`;
      });
    })();
  </script>
</body>
</html>
